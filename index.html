<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë Œíƒˆ ê²¬ì  ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .tabs {
            background: #f8f9fa;
            padding: 0;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tabs-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 15px;
        }
        
        .tab {
            padding: 12px 24px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 14px;
        }
        
        .tab:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
        }
        
        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }
        
        .tab-panel {
            display: none;
            padding: 20px;
        }
        
        .tab-panel.active {
            display: block;
        }
        
        .filters-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .filter-group {
            margin-bottom: 20px;
        }
        
        .filter-group h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2em;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 15px;
            background: white;
            border-radius: 8px;
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
        }
        
        .checkbox-group label:hover {
            background: #f0f0f0;
            border-color: #764ba2;
        }
        
        .checkbox-group input[type="checkbox"] {
            margin-right: 8px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .checkbox-group input[type="checkbox"]:checked + span {
            color: #764ba2;
            font-weight: 600;
        }
        
        .search-section {
            margin-bottom: 20px;
        }
        
        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #764ba2;
        }
        
        .search-btn, .copy-all-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.3s;
        }
        
        .search-btn:hover, .copy-all-btn:hover {
            transform: translateY(-2px);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .product-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: #764ba2;
        }
        
        .product-header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .product-header h3 {
            color: #333;
            margin-bottom: 8px;
        }
        
        .product-badges {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .product-badges span {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .stand-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .water-only-badge {
            background: linear-gradient(135deg, #00c9ff 0%, #92fe9d 100%);
            color: white;
        }
        
        .cold-water-badge {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .tag-badge {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
        }
        
        .product-info {
            margin-bottom: 15px;
        }
        
        .product-info p {
            color: #666;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .product-info strong {
            color: #333;
        }
        
        .rental-options {
            margin-top: 15px;
        }
        
        .rental-option {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }
        
        .rental-option:hover {
            background: #e8e9ea;
        }
        
        .option-info {
            flex: 1;
        }
        
        .option-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .option-details {
            font-size: 13px;
            color: #666;
        }
        
        .copy-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: transform 0.2s;
        }
        
        .copy-btn:hover {
            transform: scale(1.05);
        }
        
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #333;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .toast.success {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #f44336, #da190b);
        }
        
        .product-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .input-section h2 {
            margin-bottom: 20px;
            color: #333;
        }
        
        .input-section textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            resize: vertical;
        }
        
        .input-section textarea:focus {
            outline: none;
            border-color: #764ba2;
        }
        
        .save-btn {
            margin-top: 15px;
            padding: 12px 40px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: transform 0.3s;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
        }
        
        /* íƒœê·¸ ê´€ë¦¬ ìŠ¤íƒ€ì¼ */
        .tags-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .tags-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .tags-header h2 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .tag-input-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .tag-input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 20px;
            align-items: end;
        }
        
        .tag-input-group {
            position: relative;
        }
        
        .tag-input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .tag-input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .search-suggestions.active {
            display: block;
        }
        
        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .suggestion-item:hover {
            background: #f5f5f5;
        }
        
        .tag-add-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .tag-add-btn:hover {
            transform: translateY(-2px);
        }
        
        .product-tags-list {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .product-tags-list h3 {
            margin-bottom: 20px;
            color: #333;
        }
        
        .tagged-product-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .tagged-product-info {
            flex: 1;
        }
        
        .product-model {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .product-name {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .product-tag-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .product-tag-badges .tag-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .tag-remove {
            cursor: pointer;
            color: #666;
            font-weight: bold;
        }
        
        .tag-remove:hover {
            color: #ff4444;
        }
        
        /* ë¸Œëœë“œ ìœ ì˜ì‚¬í•­ ìŠ¤íƒ€ì¼ */
        .notes-container, .competitor-rules-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .notes-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .notes-header h2 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .notes-grid, .competitor-rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .note-card, .competitor-rule-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .note-header, .competitor-rule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .note-brand, .competitor-rule-brand {
            font-weight: 600;
            font-size: 16px;
            color: #333;
        }
        
        .note-updated {
            font-size: 12px;
            color: #999;
        }
        
        .note-content, .competitor-rule-content {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            resize: vertical;
            font-family: inherit;
        }
        
        .save-notes-btn, .save-competitor-btn {
            display: block;
            margin: 0 auto;
            padding: 12px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .save-notes-btn:hover, .save-competitor-btn:hover {
            transform: translateY(-2px);
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ë Œíƒˆ ê²¬ì  ì‹œìŠ¤í…œ</h1>
            <p>íš¨ìœ¨ì ì¸ ë Œíƒˆ ìƒí’ˆ ê´€ë¦¬ ë° ê²¬ì  ìƒì„± ë„êµ¬</p>
        </div>
        
        <div class="tabs">
            <div class="tabs-container">
                <button class="tab active" onclick="switchTab('output')">ğŸ“‹ ê²¬ì  ì¶œë ¥</button>
                <button class="tab" onclick="switchTab('input')">âœï¸ ê²¬ì  ì…ë ¥</button>
                <button class="tab" onclick="switchTab('tags')">ğŸ·ï¸ íƒœê·¸ ê´€ë¦¬</button>
                <button class="tab" onclick="switchTab('notes')">ğŸ“Œ ë¸Œëœë“œ ìœ ì˜ì‚¬í•­</button>
                <button class="tab" onclick="switchTab('competitor')">ğŸ”„ íƒ€ì‚¬ë³´ìƒ ê·œì •</button>
            </div>
        </div>
        
        <!-- ê²¬ì  ì¶œë ¥ íƒ­ -->
        <div id="output-panel" class="tab-panel active">
            <div class="search-section">
                <div class="search-container">
                    <input type="text" id="searchInput" class="search-input" placeholder="ëª¨ë¸ëª…, ì œí’ˆëª…, ë¸Œëœë“œ, íƒœê·¸ë¡œ ê²€ìƒ‰..." onkeyup="searchProducts()">
                    <button class="search-btn" onclick="searchProducts()">ğŸ” ê²€ìƒ‰</button>
                    <button class="copy-all-btn" onclick="copyAllFiltered()">ğŸ“‹ ì „ì²´ë³µì‚¬</button>
                </div>
                <div class="product-summary" id="productSummary">
                    <span>ì „ì²´ ì œí’ˆ: <strong id="totalCount">0</strong>ê°œ</span>
                    <span>ê²€ìƒ‰ ê²°ê³¼: <strong id="filteredCount">0</strong>ê°œ</span>
                </div>
            </div>
            
            <div class="filters-section">
                <div class="filter-group">
                    <h3>ğŸ“… ë Œíƒˆ ê¸°ê°„</h3>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="year3" checked>
                            <span>3ë…„ ì•½ì •</span>
                        </label>
                        <label>
                            <input type="checkbox" id="year5" checked>
                            <span>5ë…„ ì•½ì •</span>
                        </label>
                        <label>
                            <input type="checkbox" id="year6" checked>
                            <span>6ë…„ ì•½ì •</span>
                        </label>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h3>ğŸ”§ ê´€ë¦¬ ë°©ì‹</h3>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="manage4" checked>
                            <span>4ê°œì›” ê´€ë¦¬</span>
                        </label>
                        <label>
                            <input type="checkbox" id="manage2" checked>
                            <span>2ê°œì›” ê´€ë¦¬</span>
                        </label>
                        <label>
                            <input type="checkbox" id="filterSend" checked>
                            <span>í•„í„°ë°œì†¡</span>
                        </label>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h3>ğŸ¯ íƒ€ì‚¬ë³´ìƒ</h3>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="hideCompetitor">
                            <span>íƒ€ì‚¬ë³´ìƒ ìˆ¨ê¸°ê¸°</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="products-grid" id="productsGrid">
                <div class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </div>
        </div>
        
        <!-- ê²¬ì  ì…ë ¥ íƒ­ -->
        <div id="input-panel" class="tab-panel">
            <div class="input-section">
                <h2>ğŸ“ CRM ë°ì´í„° ì…ë ¥</h2>
                <p style="margin-bottom: 15px; color: #666;">CRMì—ì„œ ë³µì‚¬í•œ ì œí’ˆ ì •ë³´ë¥¼ ì•„ë˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”</p>
                <textarea id="crmInput" placeholder="ì˜ˆì‹œ:
* ëª¨ë¸ëª…: WPUIAC425S
* ì œí’ˆëª…: SKë§¤ì§ ì›ì½”í¬ í”ŒëŸ¬ìŠ¤ ì–¼ìŒë¬¼ ëƒ‰ì˜¨ì •ìˆ˜ê¸° (ì–¼ìŒëƒ‰ì˜¨ì •)

* 3ë…„ì•½ì •: 4ê°œì›”ê´€ë¦¬ / ì›” 55,900 / ì‚¬ì€í’ˆ 180,000
* 5ë…„ì•½ì •: 6Më°˜ê°’_4ê°œì›”ê´€ë¦¬ / ì›” 50,400 / ì‚¬ì€í’ˆ 330,000

ìƒí’ˆ ì•ˆë‚´í˜ì´ì§€ : https://zero-rental.biz/product-image/51317"></textarea>
                <button class="save-btn" onclick="saveProduct()">ğŸ’¾ ì œí’ˆ ì €ì¥</button>
            </div>
        </div>
        
        <!-- íƒœê·¸ ê´€ë¦¬ íƒ­ -->
        <div id="tags-panel" class="tab-panel">
            <div class="tags-container">
                <div class="tags-header">
                    <h2>ğŸ·ï¸ íƒœê·¸ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
                    <p>ìƒí’ˆì— ì»¤ìŠ¤í…€ íƒœê·¸ë¥¼ ì¶”ê°€í•˜ì—¬ ë¶„ë¥˜í•˜ê³  ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                </div>
                
                <div class="tag-input-section">
                    <div class="tag-input-grid">
                        <div class="tag-input-group">
                            <label>ëª¨ë¸ëª…/ìƒí’ˆëª… ì…ë ¥í•´ì„œ ì„ íƒí•˜ê³ </label>
                            <input type="text" id="productSearchInput" placeholder="ëª¨ë¸ëª… ë˜ëŠ” ìƒí’ˆëª… ê²€ìƒ‰..." 
                                   onkeyup="searchProductsForTag()" onfocus="searchProductsForTag()">
                            <div id="productSearchSuggestions" class="search-suggestions"></div>
                        </div>
                        <div class="tag-input-group">
                            <label>ë¶™ì´ê³  ì‹¶ì€ íƒœê·¸(ì˜ˆ: ê°€ì„±ë¹„)ë¥¼ ë¶™ì—¬ì£¼ì„¸ìš”</label>
                            <input type="text" id="tagInput" placeholder="íƒœê·¸ëª… ì…ë ¥...">
                        </div>
                        <button class="tag-add-btn" onclick="addTagToProduct()">âœ¨ íƒœê·¸ ì¶”ê°€</button>
                    </div>
                </div>
                
                <div class="product-tags-list">
                    <h3>ğŸ“Œ íƒœê·¸ê°€ ë¶™ì€ ìƒí’ˆë“¤</h3>
                    <div id="taggedProductsList">
                        <!-- íƒœê·¸ê°€ ë¶™ì€ ìƒí’ˆ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ë¸Œëœë“œ ìœ ì˜ì‚¬í•­ íƒ­ -->
        <div id="notes-panel" class="tab-panel">
            <div class="notes-container">
                <div class="notes-header">
                    <h2>ğŸ“Œ ë¸Œëœë“œë³„ ìœ ì˜ì‚¬í•­</h2>
                    <p>ê° ë¸Œëœë“œì˜ ë Œíƒˆ ì§„í–‰ ì‹œ ì£¼ì˜ì‚¬í•­ì„ ê¸°ë¡í•´ì£¼ì„¸ìš”</p>
                </div>
                <div class="notes-grid">
                    <!-- ìœ ì˜ì‚¬í•­ ì¹´ë“œë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
                <button class="save-notes-btn" onclick="saveNotes()">ğŸ’¾ ìœ ì˜ì‚¬í•­ ì €ì¥</button>
            </div>
        </div>
        
        <!-- íƒ€ì‚¬ë³´ìƒ ê·œì • íƒ­ -->
        <div id="competitor-panel" class="tab-panel">
            <div class="competitor-rules-container">
                <div class="notes-header">
                    <h2>ğŸ”„ ë¸Œëœë“œë³„ íƒ€ì‚¬ë³´ìƒ ê·œì •</h2>
                    <p>ê° ë¸Œëœë“œì˜ íƒ€ì‚¬ë³´ìƒ í”„ë¡œëª¨ì…˜ ê·œì •ê³¼ ì¡°ê±´ì„ ê¸°ë¡í•´ì£¼ì„¸ìš”</p>
                </div>
                <div class="competitor-rules-grid">
                    <!-- íƒ€ì‚¬ë³´ìƒ ê·œì • ì¹´ë“œë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
                <button class="save-competitor-btn" onclick="saveCompetitorRules()">ğŸ’¾ íƒ€ì‚¬ë³´ìƒ ê·œì • ì €ì¥</button>
            </div>
        </div>
    </div>
    
    <div class="toast" id="toast"></div>
    
    <script>
        // Supabase ì„¤ì •
        const SUPABASE_URL = 'https://luxzmdcpobdecpfmdmjs.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1eHptZGNwb2JkZWNwZm1kbWpzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQxNTA0NTUsImV4cCI6MjA0OTcyNjQ1NX0.6Fb4cd_Hc4O-3FenNXALBMzD2-qrYbA6lMgH8HGIZGY';
        
        let products = [];
        let productTags = {};
        let selectedProductForTag = null;
        
        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ëª¨ë“  íŒ¨ë„ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(tabName + '-panel').classList.add('active');
            
            // ê° íƒ­ë³„ ì´ˆê¸°í™”
            if (tabName === 'output') {
                renderProducts(products);
            } else if (tabName === 'tags') {
                updateTaggedProductsList();
            } else if (tabName === 'notes') {
                loadNotesUI();
            } else if (tabName === 'competitor') {
                loadCompetitorUI();
            }
        }
        
        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast show ${type}`;
            
            setTimeout(() => {
                toast.className = 'toast';
            }, 3000);
        }
        
        // ì œí’ˆ ë Œë”ë§
        function renderProducts(productList) {
            const grid = document.getElementById('productsGrid');
            
            if (!productList || productList.length === 0) {
                grid.innerHTML = '<div class="loading">ì œí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            // í•„í„° ì„¤ì • ê°€ì ¸ì˜¤ê¸°
            const filters = {
                year3: document.getElementById('year3').checked,
                year5: document.getElementById('year5').checked,
                year6: document.getElementById('year6').checked,
                manage4: document.getElementById('manage4').checked,
                manage2: document.getElementById('manage2').checked,
                filterSend: document.getElementById('filterSend').checked,
                hideCompetitor: document.getElementById('hideCompetitor').checked
            };
            
            grid.innerHTML = productList.map(product => {
                try {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    
                    // ì œí’ˆ íƒ€ì… ì²´í¬
                    const isStand = product.name && product.name.includes('ìŠ¤íƒ ë“œ');
                    const isWaterOnly = product.name && (product.name.includes('(ì •ìˆ˜)') || product.name.includes('(ì •ìˆ˜ì „ìš©)'));
                    const isColdWater = product.name && product.name.includes('ëƒ‰ì •ìˆ˜ê¸°');
                    
                    // ë°°ì§€ ìƒì„±
                    let badges = '';
                    if (isStand) badges += '<span class="stand-badge">ğŸ¢ ìŠ¤íƒ ë“œ</span>';
                    if (isWaterOnly) badges += '<span class="water-only-badge">ğŸ’§ ì •ìˆ˜ì „ìš©</span>';
                    if (isColdWater) badges += '<span class="cold-water-badge">â„ï¸ğŸ’§ ëƒ‰ì •ìˆ˜ê¸°</span>';
                    
                    // ì»¤ìŠ¤í…€ íƒœê·¸ ì¶”ê°€
                    const customTags = productTags[product.model] || [];
                    const customTagsHtml = customTags.map(tag => 
                        `<span class="tag-badge">âœ¨ ${tag}</span>`
                    ).join('');
                    
                    productCard.innerHTML = `
                        <div class="product-header">
                            <h3>${product.model}</h3>
                            <div class="product-badges">
                                ${badges}
                                ${customTagsHtml}
                            </div>
                        </div>
                        <div class="product-info">
                            <p><strong>${product.name}</strong></p>
                            <p>ë¸Œëœë“œ: ${product.brand}</p>
                            ${product.url ? `<p><a href="${product.url}" target="_blank">ğŸ”— ìƒí’ˆ í˜ì´ì§€</a></p>` : ''}
                        </div>
                        <div class="rental-options">
                            ${generateOptions(product, filters)}
                        </div>
                    `;
                    
                    return productCard.outerHTML;
                } catch (error) {
                    console.error('ì œí’ˆ ë Œë”ë§ ì˜¤ë¥˜:', error, product);
                    return '';
                }
            }).join('');
            
            updateProductSummary();
        }
        
        // ì˜µì…˜ ìƒì„±
        function generateOptions(product, filters) {
            let optionsHtml = '';
            
            if (!product.options) return '<p>ì˜µì…˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            
            product.options.forEach(option => {
                // í•„í„°ë§ ë¡œì§
                const yearMatch = (option.period === '3ë…„ì•½ì •' && filters.year3) ||
                                 (option.period === '5ë…„ì•½ì •' && filters.year5) ||
                                 (option.period === '6ë…„ì•½ì •' && filters.year6);
                
                if (!yearMatch) return;
                
                const isCompetitor = option.management && option.management.includes('íƒ€ì‚¬ë³´ìƒ');
                if (filters.hideCompetitor && isCompetitor) return;
                
                const manageMatch = (option.management && option.management.includes('4ê°œì›”') && filters.manage4) ||
                                   (option.management && option.management.includes('2ê°œì›”') && filters.manage2) ||
                                   (option.management && option.management.includes('í•„í„°ë°œì†¡') && filters.filterSend);
                
                if (!manageMatch) return;
                
                optionsHtml += `
                    <div class="rental-option">
                        <div class="option-info">
                            <div class="option-title">${option.period}</div>
                            <div class="option-details">
                                ${option.management} | ì›” ${option.price ? option.price.toLocaleString() : '0'}ì›
                                ${option.gift ? ` | ì‚¬ì€í’ˆ ${option.gift.toLocaleString()}ì›` : ''}
                            </div>
                        </div>
                        <button class="copy-btn" onclick="copyOption('${product.model}', '${product.name}', '${option.period}', '${option.management}', ${option.price}, ${option.gift || 0})">ë³µì‚¬</button>
                    </div>
                `;
            });
            
            return optionsHtml || '<p>ì„ íƒëœ í•„í„°ì— í•´ë‹¹í•˜ëŠ” ì˜µì…˜ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        
        // ì˜µì…˜ ë³µì‚¬
        function copyOption(model, name, period, management, price, gift) {
            const text = `* ëª¨ë¸ëª…: ${model}
* ì œí’ˆëª…: ${name}

* ${period}: ${management} / ì›” ${price.toLocaleString()} / ì‚¬ì€í’ˆ ${gift.toLocaleString()}`;
            
            navigator.clipboard.writeText(text).then(() => {
                showToast('ê²¬ì ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            });
        }
        
        // ì „ì²´ ë³µì‚¬ (í•„í„° ì ìš©)
        function copyAllFiltered() {
            const filters = {
                year3: document.getElementById('year3').checked,
                year5: document.getElementById('year5').checked,
                year6: document.getElementById('year6').checked,
                manage4: document.getElementById('manage4').checked,
                manage2: document.getElementById('manage2').checked,
                filterSend: document.getElementById('filterSend').checked,
                hideCompetitor: document.getElementById('hideCompetitor').checked
            };
            
            let allText = '';
            let copiedCount = 0;
            
            products.forEach(product => {
                let productText = '';
                let hasOptions = false;
                
                product.options.forEach(option => {
                    const yearMatch = (option.period === '3ë…„ì•½ì •' && filters.year3) ||
                                     (option.period === '5ë…„ì•½ì •' && filters.year5) ||
                                     (option.period === '6ë…„ì•½ì •' && filters.year6);
                    
                    if (!yearMatch) return;
                    
                    const isCompetitor = option.management && option.management.includes('íƒ€ì‚¬ë³´ìƒ');
                    if (filters.hideCompetitor && isCompetitor) return;
                    
                    const manageMatch = (option.management && option.management.includes('4ê°œì›”') && filters.manage4) ||
                                       (option.management && option.management.includes('2ê°œì›”') && filters.manage2) ||
                                       (option.management && option.management.includes('í•„í„°ë°œì†¡') && filters.filterSend);
                    
                    if (!manageMatch) return;
                    
                    if (!hasOptions) {
                        productText = `* ëª¨ë¸ëª…: ${product.model}\n* ì œí’ˆëª…: ${product.name}\n\n`;
                        hasOptions = true;
                    }
                    
                    productText += `* ${option.period}: ${option.management} / ì›” ${option.price.toLocaleString()} / ì‚¬ì€í’ˆ ${option.gift ? option.gift.toLocaleString() : 0}\n`;
                    copiedCount++;
                });
                
                if (hasOptions) {
                    allText += productText + '\n---\n\n';
                }
            });
            
            if (allText) {
                navigator.clipboard.writeText(allText).then(() => {
                    showToast(`${copiedCount}ê°œ ì˜µì…˜ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
                });
            } else {
                showToast('ë³µì‚¬í•  ì˜µì…˜ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
            }
        }
        
        // í†µí•© ê²€ìƒ‰ í•¨ìˆ˜
        function searchProducts() {
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            
            if (!searchValue) {
                renderProducts(products);
                return;
            }
            
            const filtered = products.filter(product => {
                // ëª¨ë¸ëª…, ì œí’ˆëª…, ë¸Œëœë“œë¡œ ê²€ìƒ‰
                const basicMatch = product.model.toLowerCase().includes(searchValue) ||
                       product.name.toLowerCase().includes(searchValue) ||
                       product.brand.toLowerCase().includes(searchValue);
                
                // íƒœê·¸ë¡œ ê²€ìƒ‰
                const tags = productTags[product.model] || [];
                const tagMatch = tags.some(tag => tag.toLowerCase().includes(searchValue));
                
                return basicMatch || tagMatch;
            });
            
            renderProducts(filtered);
        }
        
        // ì œí’ˆ ìš”ì•½ ì—…ë°ì´íŠ¸
        function updateProductSummary() {
            const totalCount = document.getElementById('totalCount');
            const filteredCount = document.getElementById('filteredCount');
            
            totalCount.textContent = products.length;
            
            const visibleCards = document.querySelectorAll('.product-card').length;
            filteredCount.textContent = visibleCards;
        }
        
        // íƒœê·¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤
        function searchProductsForTag() {
            const searchValue = document.getElementById('productSearchInput').value.toLowerCase();
            const suggestionsDiv = document.getElementById('productSearchSuggestions');
            
            if (searchValue.length < 2) {
                suggestionsDiv.classList.remove('active');
                return;
            }
            
            const matches = products.filter(p => 
                p.model.toLowerCase().includes(searchValue) || 
                p.name.toLowerCase().includes(searchValue)
            ).slice(0, 10);
            
            if (matches.length > 0) {
                suggestionsDiv.innerHTML = matches.map(p => `
                    <div class="suggestion-item" onclick="selectProductForTag('${p.model}', '${p.name.replace(/'/g, "\\'")}')">
                        <strong>${p.model}</strong> - ${p.name}
                    </div>
                `).join('');
                suggestionsDiv.classList.add('active');
            } else {
                suggestionsDiv.classList.remove('active');
            }
        }
        
        function selectProductForTag(model, name) {
            selectedProductForTag = { model, name };
            document.getElementById('productSearchInput').value = `${model} - ${name}`;
            document.getElementById('productSearchSuggestions').classList.remove('active');
        }
        
        function addTagToProduct() {
            if (!selectedProductForTag) {
                showToast('ìƒí’ˆì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”', 'error');
                return;
            }
            
            const tagName = document.getElementById('tagInput').value.trim();
            if (!tagName) {
                showToast('íƒœê·¸ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }
            
            const productKey = selectedProductForTag.model;
            if (!productTags[productKey]) {
                productTags[productKey] = [];
            }
            
            if (!productTags[productKey].includes(tagName)) {
                productTags[productKey].push(tagName);
                localStorage.setItem('productTags', JSON.stringify(productTags));
                
                // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                document.getElementById('productSearchInput').value = '';
                document.getElementById('tagInput').value = '';
                selectedProductForTag = null;
                
                updateTaggedProductsList();
                showToast(`"${tagName}" íƒœê·¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            } else {
                showToast('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íƒœê·¸ì…ë‹ˆë‹¤', 'error');
            }
        }
        
        function removeTagFromProduct(model, tag) {
            if (productTags[model]) {
                productTags[model] = productTags[model].filter(t => t !== tag);
                if (productTags[model].length === 0) {
                    delete productTags[model];
                }
                localStorage.setItem('productTags', JSON.stringify(productTags));
                updateTaggedProductsList();
                renderProducts(products); // ë©”ì¸ í™”ë©´ ì—…ë°ì´íŠ¸
                showToast('íƒœê·¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }
        }
        
        function updateTaggedProductsList() {
            const listDiv = document.getElementById('taggedProductsList');
            const taggedProducts = Object.keys(productTags).filter(key => productTags[key].length > 0);
            
            if (taggedProducts.length === 0) {
                listDiv.innerHTML = '<p style="text-align: center; color: #999;">ì•„ì§ íƒœê·¸ê°€ ë¶™ì€ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤</p>';
                return;
            }
            
            listDiv.innerHTML = taggedProducts.map(model => {
                const product = products.find(p => p.model === model);
                if (!product) return '';
                
                return `
                    <div class="tagged-product-item">
                        <div class="tagged-product-info">
                            <div class="product-model">${product.model}</div>
                            <div class="product-name">${product.name}</div>
                            <div class="product-tag-badges">
                                ${productTags[model].map(tag => `
                                    <span class="tag-badge">
                                        âœ¨ ${tag}
                                        <span class="tag-remove" onclick="removeTagFromProduct('${model}', '${tag}')">Ã—</span>
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ë¸Œëœë“œ ìœ ì˜ì‚¬í•­ í•¨ìˆ˜ë“¤
        function loadNotesUI() {
            const brands = ['SKë§¤ì§', 'LGì „ì', 'ì½”ì›¨ì´', 'êµì›ì›°ìŠ¤', 'ì²­í˜¸ë‚˜ì´ìŠ¤', 'ì¿ ì¿ ', 'ì„¸ë¼ì ¬'];
            const notesGrid = document.querySelector('.notes-grid');
            
            notesGrid.innerHTML = brands.map(brand => {
                const brandKey = brand.toLowerCase().replace(/[^a-zê°€-í£]/g, '');
                const savedNote = localStorage.getItem(`note_${brandKey}`) || '';
                const savedDate = localStorage.getItem(`note_${brandKey}_date`) || '';
                
                return `
                    <div class="note-card">
                        <div class="note-header">
                            <div class="note-brand">${brand}</div>
                            <div class="note-updated" id="note-${brandKey}-updated">${savedDate ? `ìˆ˜ì •: ${savedDate}` : ''}</div>
                        </div>
                        <textarea class="note-content" id="note-${brandKey}" placeholder="${brand} ê´€ë ¨ ìœ ì˜ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”...">${savedNote}</textarea>
                    </div>
                `;
            }).join('');
        }
        
        function saveNotes() {
            const brands = ['SKë§¤ì§', 'LGì „ì', 'ì½”ì›¨ì´', 'êµì›ì›°ìŠ¤', 'ì²­í˜¸ë‚˜ì´ìŠ¤', 'ì¿ ì¿ ', 'ì„¸ë¼ì ¬'];
            const now = new Date().toLocaleDateString('ko-KR');
            
            brands.forEach(brand => {
                const brandKey = brand.toLowerCase().replace(/[^a-zê°€-í£]/g, '');
                const textarea = document.getElementById(`note-${brandKey}`);
                if (textarea) {
                    const content = textarea.value.trim();
                    if (content) {
                        localStorage.setItem(`note_${brandKey}`, content);
                        localStorage.setItem(`note_${brandKey}_date`, now);
                        document.getElementById(`note-${brandKey}-updated`).textContent = `ìˆ˜ì •: ${now}`;
                    }
                }
            });
            
            showToast('ìœ ì˜ì‚¬í•­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        }
        
        // íƒ€ì‚¬ë³´ìƒ ê·œì • í•¨ìˆ˜ë“¤
        function loadCompetitorUI() {
            const brands = ['SKë§¤ì§', 'LGì „ì', 'ì½”ì›¨ì´', 'êµì›ì›°ìŠ¤', 'ì²­í˜¸ë‚˜ì´ìŠ¤', 'ì¿ ì¿ ', 'ì„¸ë¼ì ¬'];
            const rulesGrid = document.querySelector('.competitor-rules-grid');
            
            rulesGrid.innerHTML = brands.map(brand => {
                const brandKey = brand.toLowerCase().replace(/[^a-zê°€-í£]/g, '');
                const savedRule = localStorage.getItem(`competitor_${brandKey}`) || '';
                const savedDate = localStorage.getItem(`competitor_${brandKey}_date`) || '';
                
                return `
                    <div class="competitor-rule-card">
                        <div class="competitor-rule-header">
                            <div class="competitor-rule-brand">${brand} íƒ€ì‚¬ë³´ìƒ</div>
                            <div class="note-updated" id="competitor-${brandKey}-updated">${savedDate ? `ìˆ˜ì •: ${savedDate}` : ''}</div>
                        </div>
                        <textarea class="competitor-rule-content" id="competitor-${brandKey}" placeholder="${brand} íƒ€ì‚¬ë³´ìƒ ê·œì •ì„ ì…ë ¥í•˜ì„¸ìš”...
ì˜ˆ: 
- íƒ€ì‚¬ë³´ìƒ ì ìš© ëŒ€ìƒ ë° ì¡°ê±´
- í•„ìš” ì„œë¥˜ ë° ì¦ë¹™ ìë£Œ
- ìœ„ì•½ê¸ˆ ë©´ì œ ë²”ìœ„
- í”„ë¡œëª¨ì…˜ ê¸°ê°„ ë° ì œí•œì‚¬í•­">${savedRule}</textarea>
                    </div>
                `;
            }).join('');
        }
        
        function saveCompetitorRules() {
            const brands = ['SKë§¤ì§', 'LGì „ì', 'ì½”ì›¨ì´', 'êµì›ì›°ìŠ¤', 'ì²­í˜¸ë‚˜ì´ìŠ¤', 'ì¿ ì¿ ', 'ì„¸ë¼ì ¬'];
            const now = new Date().toLocaleDateString('ko-KR');
            
            brands.forEach(brand => {
                const brandKey = brand.toLowerCase().replace(/[^a-zê°€-í£]/g, '');
                const textarea = document.getElementById(`competitor-${brandKey}`);
                if (textarea) {
                    const content = textarea.value.trim();
                    if (content) {
                        localStorage.setItem(`competitor_${brandKey}`, content);
                        localStorage.setItem(`competitor_${brandKey}_date`, now);
                        document.getElementById(`competitor-${brandKey}-updated`).textContent = `ìˆ˜ì •: ${now}`;
                    }
                }
            });
            
            showToast('íƒ€ì‚¬ë³´ìƒ ê·œì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        }
        
        // ì œí’ˆ ì €ì¥ (CRM ì…ë ¥)
        async function saveProduct() {
            const crmText = document.getElementById('crmInput').value;
            
            if (!crmText.trim()) {
                showToast('ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }
            
            try {
                const parsed = parseCRMData(crmText);
                
                const response = await fetch(`${SUPABASE_URL}/rest/v1/rental_products`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`,
                        'Prefer': 'return=representation'
                    },
                    body: JSON.stringify(parsed)
                });
                
                if (response.ok) {
                    document.getElementById('crmInput').value = '';
                    showToast('ì œí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                    await loadFromSupabase();
                } else {
                    const error = await response.text();
                    console.error('ì €ì¥ ì‹¤íŒ¨:', error);
                    showToast('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                console.error('íŒŒì‹± ì˜¤ë¥˜:', error);
                showToast('ë°ì´í„° í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤', 'error');
            }
        }
        
        // CRM ë°ì´í„° íŒŒì‹±
        function parseCRMData(text) {
            const lines = text.split('\n').filter(line => line.trim());
            const product = {
                model: '',
                name: '',
                brand: '',
                url: '',
                options: []
            };
            
            lines.forEach(line => {
                line = line.trim();
                
                if (line.startsWith('* ëª¨ë¸ëª…:')) {
                    product.model = line.replace('* ëª¨ë¸ëª…:', '').trim();
                } else if (line.startsWith('* ì œí’ˆëª…:')) {
                    const fullName = line.replace('* ì œí’ˆëª…:', '').trim();
                    product.name = fullName;
                    
                    // ë¸Œëœë“œ ì¶”ì¶œ
                    if (fullName.includes('SKë§¤ì§')) product.brand = 'SKë§¤ì§';
                    else if (fullName.includes('LG')) product.brand = 'LGì „ì';
                    else if (fullName.includes('ì½”ì›¨ì´')) product.brand = 'ì½”ì›¨ì´';
                    else if (fullName.includes('ì›°ìŠ¤')) product.brand = 'êµì›ì›°ìŠ¤';
                    else if (fullName.includes('ì²­í˜¸')) product.brand = 'ì²­í˜¸ë‚˜ì´ìŠ¤';
                    else if (fullName.includes('ì¿ ì¿ ')) product.brand = 'ì¿ ì¿ ';
                    else if (fullName.includes('ì„¸ë¼ì ¬')) product.brand = 'ì„¸ë¼ì ¬';
                    else product.brand = 'ê¸°íƒ€';
                } else if (line.includes('ì•½ì •:')) {
                    const parts = line.split('/').map(p => p.trim());
                    const period = parts[0].replace('*', '').trim().split(':')[0];
                    const management = parts[0].split(':')[1]?.trim() || '';
                    const price = parseInt(parts[1]?.replace(/[^0-9]/g, '') || 0);
                    const gift = parseInt(parts[2]?.replace(/[^0-9]/g, '') || 0);
                    
                    product.options.push({
                        period,
                        management,
                        price,
                        gift
                    });
                } else if (line.includes('ìƒí’ˆ ì•ˆë‚´í˜ì´ì§€')) {
                    product.url = line.split(':').slice(1).join(':').trim();
                }
            });
            
            return product;
        }
        
        // Supabaseì—ì„œ ë°ì´í„° ë¡œë“œ
        async function loadFromSupabase() {
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/rental_products`, {
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    products = data;
                    
                    // ë¸Œëœë“œ ìˆœì„œ ì •ì˜
                    const brandOrder = ['SKë§¤ì§', 'LGì „ì', 'ì½”ì›¨ì´', 'êµì›ì›°ìŠ¤', 'ì²­í˜¸ë‚˜ì´ìŠ¤', 'ì¿ ì¿ ', 'ì„¸ë¼ì ¬', 'ê¸°íƒ€'];
                    
                    // ë¸Œëœë“œë³„ë¡œ ì •ë ¬
                    const sorted = products.sort((a, b) => {
                        const brandA = brandOrder.indexOf(a.brand);
                        const brandB = brandOrder.indexOf(b.brand);
                        
                        if (brandA !== brandB) {
                            return brandA - brandB;
                        }
                        
                        return a.model.localeCompare(b.model);
                    });
                    
                    renderProducts(sorted);
                    
                    updateProductSummary();
                    updateTaggedProductsList();
                    showToast(products.length + 'ê°œ ì œí’ˆ ë°ì´í„° ë¡œë“œ ì™„ë£Œ!', 'success');
                } else {
                    console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                    showToast('ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                console.error('ë¡œë“œ ì˜¤ë¥˜:', error);
                showToast('ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('DOMContentLoaded', function() {
            // íƒœê·¸ ë°ì´í„° ë¡œë“œ
            productTags = JSON.parse(localStorage.getItem('productTags') || '{}');
            
            // Supabaseì—ì„œ ë°ì´í„° ë¡œë“œ
            loadFromSupabase();
            
            // í•„í„° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            const filterCheckboxes = document.querySelectorAll('.checkbox-group input[type="checkbox"]');
            filterCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => renderProducts(products));
            });
        });
    </script>
</body>
</html>
